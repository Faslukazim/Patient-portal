var _=(r,t,o)=>new Promise((s,e)=>{var n=a=>{try{p(o.next(a))}catch(d){e(d)}},i=a=>{try{p(o.throw(a))}catch(d){e(d)}},p=a=>a.done?s(a.value):Promise.resolve(a.value).then(n,i);p((o=o.apply(r,t)).next())});import{c as m,r as y,a as v,b as E,d as P,_ as k,e as b,o as I,f as w,g as R,h as C,s as O,i as S,j as A,C as j,I as $,k as H}from"./vendor.7f6b54c2.js";const N=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}};N();const U="modulepreload",h={},q="/assets/patientportal/patient-portal/",L=function(t,o){return!o||o.length===0?t():Promise.all(o.map(s=>{if(s=`${q}${s}`,s in h)return;h[s]=!0;const e=s.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${n}`))return;const i=document.createElement("link");if(i.rel=e?"stylesheet":U,e||(i.as="script",i.crossOrigin=""),i.href=s,document.head.appendChild(i),e)return new Promise((p,a)=>{i.addEventListener("load",p),i.addEventListener("error",a)})})).then(()=>t())},g=m({url:"frappe.auth.get_logged_user",cache:"User",onError(r){r&&r.exc_type==="AuthenticationError"&&u.push({name:"LoginPage"})}});function f(){let t=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return t==="Guest"&&(t=null),t}const c=y({login:m({url:"login",makeParams({email:r,password:t}){return{usr:r,pwd:t}},onSuccess(r){g.reload(),c.user=f(),c.login.reset(),u.replace(r.default_route||"/")}}),logout:m({url:"logout",onSuccess(){g.reset(),c.user=f(),u.replace({name:"Login"})}}),signup:m({url:"signup",makeParams({email:r,password:t,fullName:o}){return{usr:r,pwd:t,full_name:o}},onSuccess(r){c.user=f(),c.signup.reset(),u.replace(r.default_route||"/")}}),user:f(),isLoggedIn:v(()=>!!c.user)}),x=[{path:"/",name:"Home",component:()=>L(()=>import("./Home.3aca5beb.js"),["assets/Home.3aca5beb.js","assets/vendor.7f6b54c2.js","assets/vendor.1875b906.css"])},{name:"Login",path:"/account/login",component:()=>L(()=>import("./Login.7e058090.js"),["assets/Login.7e058090.js","assets/vendor.7f6b54c2.js","assets/vendor.1875b906.css"])}];let u=E({history:P("/patient-portal"),routes:x});u.beforeEach((r,t,o)=>_(void 0,null,function*(){let s=c.isLoggedIn;try{yield g.promise}catch(e){s=!1}r.name==="Login"&&s?o({name:"Home"}):r.name!=="Login"&&!s?o({name:"Login"}):o()}));const B={};function V(r,t){const o=b("router-view");return I(),w("div",null,[R(o)])}var D=k(B,[["render",V]]);let l=C(D);O("resourceFetcher",H);l.use(u);l.use(S);l.component("Button",A);l.component("Card",j);l.component("Input",$);l.mount("#app");export{c as s};
