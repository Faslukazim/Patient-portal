import{_ as A,l as m,a as h,D as P,o,f as r,p as n,v as x,F as k,q as D,t as M,E as I,G as F,c as N,w as H,z as $,A as L,H as O,J as R,K as V,m as Y,g as j}from"./vendor.41cb6c45.js";import{M as B}from"./Header.bc448318.js";import{i as q}from"./index.f5e9f9ce.js";import"./index.b4544bcf.js";const z={class:"p-4 min-w-[450px] mx-auto bg-white shadow-sm rounded-lg h-[400px]"},E={class:"flex justify-center gap-5 items-center mb-4"},G={class:"text-lg font-semibold"},J=I('<div class="grid grid-cols-7 gap-0 text-center text-gray-700 text-sm mb-1" data-v-38c3bdec><div class="py-1" data-v-38c3bdec>Su</div><div class="py-1" data-v-38c3bdec>Mo</div><div class="py-1" data-v-38c3bdec>Tu</div><div class="py-1" data-v-38c3bdec>We</div><div class="py-1" data-v-38c3bdec>Th</div><div class="py-1" data-v-38c3bdec>Fr</div><div class="py-1" data-v-38c3bdec>Sa</div></div>',1),K={class:"grid grid-cols-7 gap-0 text-center h-[calc(100%-76px)]"},W=["onClick"],Q={__name:"Calendar",setup(b){const e=m(new Date().getMonth()),a=m(new Date().getFullYear()),s=m(null),c=m(new Date),f=m(null),g=h(()=>{const v=new Date(a.value,e.value,1),_=new Date(a.value,e.value+1,0);v.getDay();const t=_.getDate(),S=[];for(let C=1;C<=t;C++)S.push(C);return S}),i=h(()=>{const _=new Date(a.value,e.value,1).getDay();return _===0?[]:Array(_).fill("")}),d=h(()=>`${new Date(a.value,e.value).toLocaleString("default",{month:"long"})} ${a.value}`),l=v=>{const _=new Date(a.value,e.value,v);return _.getDate()===c.value.getDate()&&_.getMonth()===c.value.getMonth()&&_.getFullYear()===c.value.getFullYear()},p=v=>new Date(a.value,e.value,v)<c.value&&!l(v);function y(){e.value===0?(e.value=11,a.value-=1):e.value-=1}function u(){e.value===11?(e.value=0,a.value+=1):e.value+=1}function w(v){const t=new Date(a.value,e.value,v).toLocaleDateString("en-CA");f.value=t,s.value=v,T()}function T(){console.log(`Fetching availability for ${f.value}...`)}return P("selectedDate",f),(v,_)=>(o(),r("div",z,[n("div",E,[n("button",{onClick:y,class:"text-gray-700 bg-gray-200 h-8 w-8 rounded-full hover:bg-gray-300 text-lg"}," < "),n("div",G,x(d.value),1),n("button",{onClick:u,class:"text-gray-700 bg-gray-200 h-8 w-8 rounded-full hover:bg-gray-300 text-lg"}," > ")]),J,n("div",K,[(o(!0),r(k,null,D(i.value,t=>(o(),r("div",{key:t,class:"h-full flex items-center justify-center"}))),128)),(o(!0),r(k,null,D(g.value,t=>(o(),r("div",{key:t,class:M(["h-10 w-10 flex items-center justify-center transition-colors rounded-full",{"cursor-pointer hover:bg-gray-300":!p(t)&&!l(t)&&s.value!==t,"bg-black text-white cursor-default font-medium":s.value===t,"bg-gray-300 text-gray-700 cursor-default":l(t)&&s.value!==t,"text-gray-700":!p(t)&&!l(t)&&s.value!==t,"text-gray-400 cursor-default":p(t)}]),onClick:S=>!p(t)&&s.value!==t&&w(t)},x(t),11,W))),128))])]))}};var U=A(Q,[["__scopeId","data-v-38c3bdec"]]);const X=b=>(O("data-v-9159a2f0"),b=b(),R(),b),Z={class:"w-fit h-fit p-2 border border-gray-50 rounded-md shadow-sm bg-white"},ee=X(()=>n("h3",{class:"text-md font-medium mb-3 whitespace-nowrap"},"Available Slots",-1)),te={key:0,class:"text-center"},ae={key:1,class:"text-center text-red-500"},se={key:2,class:"flex flex-col gap-4 overflow-auto h-64 custom-scrollbar"},oe=["onClick"],re={key:3,class:"text-center text-gray-500"},le={__name:"TimeSlots",setup(b){const e=m(""),a=F("selectedDate",m(new Date().toISOString().split("T")[0]));console.log("seleeeeeeeeeeeeeeeeeeeeeeeee",a);const s=N({url:"https://demo-earthians.frappe.cloud/api/method/healthcare.healthcare.doctype.patient_appointment.patient_appointment.get_availability_data",method:"GET",params:{date:"26-08-2024",practitioner:"HLC-PRAC-2024-00001",appointment:JSON.stringify({doctype:"Patient Appointment",practitioner:"HLC-PRAC-2024-00001"})},headers:{Authorization:"token 1557a1f5525e986:30392d6357339c5"},cache:!1});H(a,(d,l)=>{e.value="",s.fetch()}),s.fetch();const c=h(()=>{var d;return((d=s.data)==null?void 0:d.slot_details)||[]});function f(d){e.value=d}function g(d){const[l,p]=d.split(":"),y=parseInt(l),u=parseInt(p),w=y>=12?"PM":"AM";return`${y%12||12}:${u<10?"0"+u:u} ${w}`.replace(/:00 /g," ")}function i(){q("Success!",{theme:"light",type:"info"})}return(d,l)=>{var p,y;return o(),r("div",Z,[ee,$(s).loading?(o(),r("div",te,"Loading...")):L("",!0),$(s).error?(o(),r("div",ae,x($(s).error.message),1)):!$(s).loading&&c.value.length>0&&((p=c.value[0])==null?void 0:p.avail_slot.length)>0?(o(),r("div",se,[(o(!0),r(k,null,D((y=c.value[0])==null?void 0:y.avail_slot,u=>(o(),r("div",{key:u.name,class:M(["p-1 items-center flex justify-between font-medium text-md cursor-pointer shadow-sm rounded-md",g(u.from_time)===e.value?"bg-black text-white":"bg-gray-100 hover:bg-gray-200"]),onClick:w=>f(g(u.from_time))},[n("span",null,x(g(u.from_time))+" - "+x(g(u.to_time)),1)],10,oe))),128))])):(o(),r("div",re,"No available slots")),e.value?(o(),r("div",{key:4,class:"mt-5 p-1 rounded-md bg-black text-white font-medium text-center cursor-pointer",onClick:i}," Book ")):L("",!0)])}}};var ne=A(le,[["__scopeId","data-v-9159a2f0"]]);const ce={class:"w-screen font-sans flex flex-col lg:flex-row justify-center"},ie={class:"flex flex-col lg:flex-row max-w-6xl h-full mt-28 shadow-sm border border-gray-50 rounded-md"},de={class:"flex-1 overflow-auto p-5"},ue={class:"mt-5 flex justify-center flex-wrap gap-3 overflow-x-auto scrollbar-hide"},ve=["src"],_e={class:"text-lg font-medium tracking-wider"},me={class:"text-xs font-medium tracking-wider"},fe={class:"text-xs font-medium tracking-wider"},pe={class:"flex flex-col md:flex-row gap-5 p-5 lg:p-0 transition-all"},ge={__name:"Home",setup(b){m(!1),m(""),m(!1);const e=V(),a=h(()=>e.query.doctor||""),s=h(()=>e.query.department||""),c=Y({doctype:"Healthcare Practitioner",fields:["name","practitioner_name","image","department"],auto:!0}),f=h(()=>{const i=c.list.data;return console.log("PractList data:",i),Array.isArray(i)?i:[]}),g=h(()=>(console.log("Selected Doctor:",a.value),console.log("Selected Department:",s.value),Array.isArray(f.value)?f.value.filter(i=>i.practitioner_name===a.value):(console.error("PractList is not an array:",f.value),[])));return H(s,i=>{c.list&&c.list.params&&(c.list.params.filters.department=i,c.list.fetch())}),(i,d)=>(o(),r("div",ce,[j(B),n("div",ie,[n("div",de,[n("div",ue,[(o(!0),r(k,null,D(g.value,l=>(o(),r("div",{key:l.practitioner_name,class:M(["cursor-pointer w-full sm:w-52 h-52 p-1 flex-col flex-shrink-0 items-center flex justify-center text-gray-800 shadow-sm hover:bg-gray-50 border transition-transform hover:scale-105 rounded-md gap-2",{"bg-gray-100":a.value===l.practitioner_name}])},[n("img",{class:"h-20 w-16 bg-gray-50 rounded-md",src:l.image,alt:""},null,8,ve),n("span",_e,x(l.practitioner_name),1),n("span",me,x(l.name),1),n("span",fe,x(l.department),1)],2))),128))])]),n("div",pe,[j(U,{class:"w-full lg:w-1/2 h-full"}),j(ne,{class:"w-full lg:w-1/2 h-full"})])])]))}};var we=A(ge,[["__scopeId","data-v-6f5f6ef1"]]);export{we as default};
